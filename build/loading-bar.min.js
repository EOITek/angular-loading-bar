/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2018 Wes Cruver
 * License: MIT
 */

!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(o){var n=["$q","$cacheFactory","$log","cfpLoadingBar",function(e,i,t,r){function a(n){var e,t=i.get("$http"),r=o.defaults;!n.cache&&!r.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(e=angular.isObject(n.cache)?n.cache:angular.isObject(r.cache)?r.cache:t);var a=void 0!==e&&void 0!==e.get(n.url);return void 0!==n.cached&&a!==n.cached?n.cached:n.cached=a}return{request:function(n){return n.ignoreLoadingBar||a(n)||r.push({url:n.url}),n},response:function(n){return n&&n.config?n.config.ignoreLoadingBar||a(n.config)||r.pop({url:n.config.url,result:n}):t.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),n},responseError:function(n){return n&&n.config?n.config.ignoreLoadingBar||a(n.config)||r.pop({url:n.config.url,result:n}):t.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e.reject(n)}}}];o.interceptors.push(n)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner" class="loading-bar-el"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar" class="loading-bar-el"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$q","$document","$timeout","$rootScope",function(o,a,i,c){function l(n,e,t){var r=n[0],a=e&&e[0],i=t&&t[0];return r.style.opacity=0,!i||i.nextElementSibling?a.appendChild(r):a.insertBefore(r,i),r.style.opacity="",o(function(t){r.addEventListener("transitionend",function n(e){r.removeEventListener("transitionend",n),t(e)})})}function e(n){var r=n[0];return r.style.opacity=0,o(function(t){r.addEventListener("transitionend",function n(e){r.removeEventListener("transitionend",n),r.parentElement.removeChild(r),t(e)})})}var t,d,r,s=this.parentSelector,u=angular.element(this.loadingBarTemplate),p=u.find("div").eq(0),h=angular.element(this.spinnerTemplate),g=!1,f=0,m=this.autoIncrement,v=this.includeSpinner,B=this.includeBar,b=this.startSize,y=0,S=0,$=this.latencyThreshold;function L(){if(i.cancel(d),!g){var n=a[0],e=n.querySelector?n.querySelector(s):a.find(s)[0];e||(e=n.getElementsByTagName("body")[0]);var t=angular.element(e),r=e.lastChild&&angular.element(e.lastChild);c.$broadcast("cfpLoadingBar:started"),g=!0,B&&l(u,t,r),v&&l(h,t,B?u:r),T(b)}}function T(n){if(g){var e=100*n+"%";p.css("width",e),f=n,m&&(i.cancel(t),t=i(function(){E()},250))}}function E(){if(!(1<=I())){var n=0,e=I();n=0<=e&&e<.25?(3*Math.random()+3)/100:.25<=e&&e<.65?3*Math.random()/100:.65<=e&&e<.9?2*Math.random()/100:.9<=e&&e<.99?.005:0,T(I()+n)}}function I(){return f}function j(){f=0,g=!1}function q(){T(1),i.cancel(d),d=i(function(){var n=e(u);n&&n.then&&n.then(j),e(h),c.$broadcast("cfpLoadingBar:completed")},500)}return{start:L,set:T,status:I,inc:E,complete:q,push:function(n){c.$broadcast("cfpLoadingBar:loading",n),0===y&&($?r=i(function(){L()},$):L()),T(S/++y)},pop:function(n){y<=++S?(c.$broadcast("cfpLoadingBar:loaded",n),i.cancel(r),q(),y=S=0):T(S/y)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();