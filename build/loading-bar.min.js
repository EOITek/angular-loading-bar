/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2017 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$log","cfpLoadingBar",function(b,c,d,e){function f(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d&&void 0!==d.get(b.url);return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}return{request:function(a){return a.ignoreLoadingBar||f(a)||e.push({url:a.url}),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||f(a.config)||e.pop({url:a.config.url,result:a}),a):(d.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||f(a.config)||e.pop({url:a.config.url,result:a}),b.reject(a)):(d.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){c.cancel(q),k(),C=0,B=0}function f(){if(n||(n=a.get("$animate")),c.cancel(p),!v){var e=b[0],f=e.querySelector?e.querySelector(r):b.find(r)[0];f||(f=e.getElementsByTagName("body")[0]);var h=angular.element(f),i=f.lastChild&&angular.element(f.lastChild);d.$broadcast("cfpLoadingBar:started"),v=!0,z&&n.enter(s,h,i),y&&n.enter(u,h,s),g(A)}}function g(a){if(v){var b=100*a+"%";t.css("width",b),w=a,x&&(c.cancel(o),o=c(function(){h()},250))}}function h(){if(!(i()>=1)){var a=0,b=i();a=b>=0&&b<.25?(3*Math.random()+3)/100:b>=.25&&b<.65?3*Math.random()/100:b>=.65&&b<.9?2*Math.random()/100:b>=.9&&b<.99?.005:0;var c=i()+a;g(c)}}function i(){return w}function j(){w=0,v=!1}function k(){n||(n=a.get("$animate")),g(1),c.cancel(p),p=c(function(){var a=n.leave(s,j);a&&a.then&&a.then(j),n.leave(u),d.$broadcast("cfpLoadingBar:completed")},500)}function l(a){d.$broadcast("cfpLoadingBar:loading",a),0===B&&(q=c(function(){f()},D)),B++,g(C/B)}function m(a){C++,C>=B?(d.$broadcast("cfpLoadingBar:loaded",a),e()):g(C/B)}var n,o,p,q,r=this.parentSelector,s=angular.element(this.loadingBarTemplate),t=s.find("div").eq(0),u=angular.element(this.spinnerTemplate),v=!1,w=0,x=this.autoIncrement,y=this.includeSpinner,z=this.includeBar,A=this.startSize,B=0,C=0,D=this.latencyThreshold;return{start:f,set:g,status:i,inc:h,complete:k,push:l,pop:m,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();